
1.记忆规则记录
触发时机：
●   在解决一个重要错误后。
●   在完成一个新功能或一个关键重构后。
●   在一个工作会话结束前，作为总结。

为了解决这个问题，我们可以利用 Cursor 的“规则(Rule)”功能，定义一个标准的记忆模板，让 AI 在完成阶段性任务后，自动或在我们的指导下，将关键信息结构化地记录下来。
```markdown
## 1. 背景上下文
(记录项目类型、技术栈、环境、总体目标等)

## 2. 关键决策
(记录重要技术或架构决策及其原因)

## 3. 工具使用记录
(记录主要使用的工具、命令、文件操作等)

## 4. 用户意图演进
(记录需求变化、优先级调整、新增功能等)

## 5. 执行结果汇总
(记录生成的代码、测试/验证结果等)

## 6. 错误与解决
(记录遇到的错误、解决方法及教训)

## 7. 未解决问题
(记录当前待办事项、已知限制等)

## 8. 后续计划
(记录下一步行动和长期规划)
```

### 记录原则：
1. **上下文保持**：帮助AI助手在长期项目协作中维持连续的项目记忆
2. **问题溯源**：详细记录问题发生的背景、分析过程和解决方案
3. **策略沉淀**：从具体案例中提炼可复用的解决思路和方法
4. **状态追踪**：记录项目进展、用户偏好、已验证的方案等关键状态
5. **决策依据**：保留重要决策的完整reasoning过程，便于后续参考

### 实施指导：
- 记录足够的细节，确保AI助手能够理解项目的来龙去脉
- 保留具体的技术细节（命令、配置、版本等），因为这些对项目连续性很重要
- 既记录成功的方案，也记录失败的尝试和原因
- 适度总结通用策略，但重点是项目特定的上下文
- 如出现与上述8段不完全契合的新主题，可在末尾添加"## 9. 自定义主题"

### 文件性质：
- **AI助手的项目工作笔记**：帮助维持长期对话中的项目状态连续性
- **私有记忆库**：不面向团队分享，专注于AI-用户协作的效率
- **上下文恢复工具**：当重新开始工作时，能快速恢复项目状态和进展
- **文件位置**：`.cursor/CURSOR_MEMORY.md`（项目根目录下的`.cursor/`文件夹内）
- **格式**：Markdown纯文本，章节标题前加`##`，条目用`-`列表形式

### 使用场景：
- 项目暂停后重新开始时，快速恢复上下文
- 遇到类似问题时，参考之前的解决方案
- 理解用户的工作习惯和偏好
- 追踪项目的技术债务和待办事项


2.唤醒记忆
“请先阅读并理解项目根目录下的 `.cursor/CURSOR_MEMORY.md` 文件，然后基于其中的上下文，帮我分析 xxx 问题。”

3.日志文件过大，无法直接分析
3.1. 创建日志文件夹: 在你的项目工作区根目录下，创建一个专门的文件夹，例如 `debug_logs/`。
我正在排查一个问题，相关的日志文件在 `debug_logs/error-2024-05-30.log`。我在日志中发现了下面这段关键错误：
请帮我分析一下这个 `NullPointerException` 的根本原因是什么？可以查看日志中这个时间点附近的其他日志，并结合 `StrategyStorageContainerExecutor.java` 的代码进行分析。

3.2. 放入日志文件: 将需要分析的大型日志文件（如 `error-2024-05-30.log`）放入该文件夹。
3.3 提供关键“路标”: 在对话框中，首先告诉 AI 日志文件的路径。然后，从日志中截取一小段最关键的信息（上下文）作为“路标”，比如一个 `Exception` 堆栈、一条 `FATAL` 级别的错误信息，或者一段异常的业务流水号记录。
3.4. 下达分析指令: 指示 AI 读取并分析文件。

4.Cursor + IDEA，无缝混合开发体验
https://aibook.ren/archives/cursor-plugin-for-switch-with-idea 
社区已经为我们提供了完美的解决方案：Switch2Cursor + Switch2IDEA。
●   Switch2Cursor: 安装在 IDEA 中的插件。
●   Switch2IDEA: 安装在 Cursor 中的插件。

5.提示词推荐
5.1 为了解决安全问题, 避免误删,误覆盖重要文件
在执行任何删除操作前，必须回答：
[ ] 是否已经尝试修复错误？
[ ] 是否已经与用户沟通？
[ ] 是否有其他解决方案？
[ ] 用户是否明确同意删除？

- **默认使用**: `>>` (追加操作)，`edit_file` 工具优先
- **严格禁止**: `>` (覆盖操作)，特别是配置文件

5.2 适度限制AI自主性
请严格按照我的指示做事, 问你问题你就只回答问题; 让你做A,你就只做A, 不要额外做B; 除非跟我确认得到我的允许. 
我们尽可能遵循"方案讨论拟定-方案确认-执行-测试验证"的思路做事, 遇到问题和需求时, 不要总是一味的以完成为目的, 在可能错误的路上错太远; 而是要多跟我讨论确认, 保证在整个过程里面我也清楚了解方案, 知道问题根因.
* 尝试解决问题时, 永远不要猜测问题原因!
* 当你的提议或者修改被拒绝后, 如果你坚持自己是正确的, 请跟我解释和沟通, 而不是一味的坚持自己. 
* 切忌, 不要一门心思的尝试直接解决问题, 有点想法就直接去执行, 比如尝试修改文件; 而是在修改之前反思一下自己有多大的把握, 把握不大就要总结思路跟我讨论, 除非特别简单. 