# =========================================
# Kimi Translate Service — .env.example
# 复制为 .env 并填写实际值；请务必把 .env 加入 .gitignore
# =========================================

# =========================================
# 使用说明
# 1) 复制本文件为 .env 并填写 MOONSHOT_API_KEY
# 2) 将 .env 加入 .gitignore（保护密钥；生产用环境注入）
#
# 本地加载示例：
#   macOS/Linux:
#     set -a; source .env; set +a
#     ./mvn spring-boot:run
#
#   Windows PowerShell:
#     Get-Content .env | ForEach-Object {
#       if ($_ -match '^(.*?)=(.*)$') {
#         $name=$Matches[1]; $value=$Matches[2];
#         [Environment]::SetEnvironmentVariable($name,$value,'Process')
#       }
#     }
#     mvn spring-boot:run
#
# 生产环境：
#   - 在部署系统（Docker/K8s/CI/云主机）里注入同名环境变量即可
#   - 千万不要把真实 .env 提交到仓库
# =========================================

# ===== 基本认证与接口 =====
# 必填：到 Kimi/Moonshot 控制台获取你的 API Key
MOONSHOT_API_KEY=
# API 端点（默认即可；如走自建网关/代理可改）
MOONSHOT_API_URL=https://api.moonshot.cn/v1/chat/completions

# ===== 账号速率/配额（按你的账级填写；下列为 Free 典型值） =====
# 注意：Kimi 网关按 “prompt_tokens + max_tokens(=你请求中的max_tokens)” 计入 TPM/TPD
# RPM：每分钟允许的请求数
MOONSHOT_RPM=5000
# TPM：每分钟允许的 Token 数（按 prompt + max_tokens 计）
MOONSHOT_TPM=384000
# TPD：每天允许的 Token 数（无限制）
MOONSHOT_TPD=0
# 我们在每个请求里显式设置的 max_tokens（影响网关计费与是否截断）
MOONSHOT_MAX_COMPLETION=1500

# ===== 翻译批处理切片与预算（TranslateService 使用，本地逻辑，不是服务端限制） =====
# 单次请求的“预算上限”（prompt + max_tokens）的本地约束，用于决定如何分批
TRANSLATE_MAX_TOKENS_PER_REQUEST=30000
# 单批最多条目，避免 texts 数组过大导致模型易错或 JSON 过长
TRANSLATE_MAX_ITEMS_PER_BATCH=500
# 给“max_tokens”预留的安全余量（防止逼近上限导致 length 截断）
TRANSLATE_COMPLETION_MARGIN=50

# ===== 翻译方向与微小片段策略 =====
# 默认翻译方向：ZH2EN（中->英）或 EN2ZH（英->中）
TRANSLATE_DIRECTION=ZH2EN
# 是否对“微小/纯标点/纯空白/单字符ASCII”等片段本地直通（不送模型）
# true：更稳、更省Token；false：全部送模型，便于调试
TRANSLATE_TRIVIAL_PASSTHROUGH=true

# ===== 可选：HTTP 代理（若需） =====
#HTTP_PROXY=http://127.0.0.1:7890
#HTTPS_PROXY=http://127.0.0.1:7890

# ===== 可选：开发环境 UTF-8（避免控制台中文乱码） =====
#JAVA_TOOL_OPTIONS=-Dfile.encoding=UTF-8